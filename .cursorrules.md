# EderGPT - Cursor Rules

## Projekt-Übersicht
EderGPT ist ein unternehmensinternes KI-Wissenssystem (CompanyGPT), das kontrolliert, sicher und transparent arbeitet.

## Architektur-Prinzipien

### Zwei-Wege-System
- **Admin-Bereich**: Vollständige Systemkontrolle (User, Wissen, Settings, Audit)
- **User-Bereich**: Minimal, nur Chat + Profil

### Wissenslogik
- Ordnerbasierte Wissensverwaltung
- Drei Modi: LLM-only, Hybrid, RAG-only
- Strikte Berechtigungstrennung

## Tech-Stack

### Backend
- Node.js + Express + TypeScript
- Prisma ORM + PostgreSQL
- JWT-Authentifizierung
- OpenAI/Azure OpenAI für LLM
- Qdrant/Chroma für Vektorsuche

### Frontend
- React 18 + TypeScript
- Vite als Build-Tool
- Tailwind CSS + shadcn/ui
- Zustand für State Management
- React Router v6

### Infrastruktur
- Docker + Docker Compose
- PostgreSQL (Hauptdatenbank)
- Qdrant (Vektordatenbank)

## Code-Konventionen

### TypeScript
- Strikte Typisierung (`strict: true`)
- Interfaces für alle API-Responses
- Enums für feste Werte

### Dateistruktur Backend
```
src/
├── routes/          # Dünne Route-Handler
├── services/        # Business-Logik (dicke Services)
├── middleware/      # Auth, Error-Handling, Logging
├── types/           # TypeScript-Typen
└── utils/           # Hilfsfunktionen
```

### Dateistruktur Frontend
```
src/
├── pages/admin/     # Admin-Seiten
├── pages/user/      # User-Seiten
├── components/      # Wiederverwendbare Komponenten
├── stores/          # Zustand-Stores
├── services/        # API-Aufrufe
└── hooks/           # Custom Hooks
```

## Wichtige Regeln

1. **Admin/User-Trennung**: Routes und Pages strikt getrennt halten
2. **Berechtigungen zentral**: Immer über `accessService` prüfen
3. **Settings-driven**: Alle konfigurierbaren Werte aus System Settings
4. **Audit-Logging**: Wichtige Aktionen automatisch loggen
5. **Keine Halluzinationen**: Chat darf nicht spekulieren

## Docker-Befehle
- Backend neu starten: `docker-compose restart backend`
- Frontend neu starten: `docker-compose restart frontend`
- Logs anzeigen: `docker-compose logs -f`
- Alle Services: `docker-compose up -d`

## Terminal-Hinweis
Bei PowerShell `;` statt `&&` für Befehlsverkettung verwenden.

